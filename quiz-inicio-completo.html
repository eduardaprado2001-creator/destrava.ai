<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destrava A√≠ - Quiz Diagn√≥stico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .animate-fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        .animate-slide-up {
            animation: slideUp 0.8s ease-out forwards;
        }

        .animate-scale-in {
            animation: scaleIn 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0) rotate(-180deg); }
            to { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .hover-scale {
            transition: all 0.3s ease;
        }

        .hover-scale:hover {
            transform: scale(1.02);
        }

        .btn-primary {
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: scale(1.02);
        }

        .btn-primary:active {
            transform: scale(0.95);
        }

        .gamification-badge {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .xp-bar {
            transition: width 0.7s ease;
        }

        .notification-enter {
            animation: notificationSlide 0.3s ease-out forwards;
        }

        @keyframes notificationSlide {
            from { opacity: 0; transform: translateY(-100px) scale(0.8); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .card-animation {
            animation: slideUp 0.8s ease-out forwards;
        }

        .card-animation:nth-child(1) { animation-delay: 0.1s; }
        .card-animation:nth-child(2) { animation-delay: 0.2s; }
        .card-animation:nth-child(3) { animation-delay: 0.3s; }
        .card-animation:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body class="bg-gradient-to-b from-[#2b1a4e] via-[#3c2569] to-[#4B2E83] text-white min-h-screen">

    <!-- Gamification Layer -->
    <div class="fixed top-2 right-2 z-50 flex items-center gap-2 md:top-4 md:right-4 md:gap-3">
        <div class="gamification-badge rounded-full bg-gradient-to-r from-purple-900/80 to-blue-900/80 backdrop-blur-md px-2 py-1 md:px-3 md:py-1.5 text-xs font-bold text-white ring-1 ring-purple-400/30 shadow-lg" style="animation-delay: 0.5s;">
            <div class="flex items-center gap-1 md:gap-2">
                <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M21,6H18V3A1,1 0 0,0 17,2H7A1,1 0 0,0 6,3V6H3A1,1 0 0,0 2,7V21A1,1 0 0,0 3,22H21A1,1 0 0,0 22,21V7A1,1 0 0,0 21,6M8,4H16V6H8V4M20,20H4V8H6V10H8V8H16V10H18V8H20V20Z"/>
                </svg>
                <span class="md:hidden">Lv<span id="level-mobile">1</span></span>
                <span class="hidden md:inline">N√≠vel <span id="level-desktop">1</span></span>
            </div>
        </div>

        <div class="gamification-badge rounded-full bg-gradient-to-r from-yellow-600/80 to-orange-600/80 backdrop-blur-md px-2 py-1 md:px-3 md:py-1.5 text-xs font-bold text-white ring-1 ring-yellow-400/30 shadow-lg min-w-[80px] md:min-w-[120px]" style="animation-delay: 0.6s;">
            <div class="flex flex-col gap-1">
                <div class="text-center text-yellow-200 text-xs">
                    <span id="current-xp">0</span>/<span id="next-level-xp">50</span> XP
                </div>
                <div class="h-1 rounded-full bg-black/30 overflow-hidden">
                    <div id="xp-bar" class="xp-bar h-full bg-gradient-to-r from-green-400 via-yellow-400 to-orange-500 rounded-full" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <button onclick="toggleDashboard()" class="rounded-full bg-gradient-to-r from-yellow-500 to-orange-500 p-2 md:p-3 text-white shadow-xl hover:from-yellow-600 hover:to-orange-600 transition-all duration-300 ring-1 ring-yellow-400/30 hover:scale-110">
            <svg class="w-4 h-4 md:w-5 md:h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z"/>
            </svg>
        </button>
    </div>

    <!-- Notification System -->
    <div id="notification-container" class="fixed top-16 right-4 z-50 max-w-sm"></div>

    <!-- Gamification Dashboard Modal -->
    <div id="dashboard-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 backdrop-blur-sm p-4" onclick="closeDashboard(event)">
        <div class="w-full max-w-2xl rounded-3xl bg-gradient-to-br from-[#1a1a2e] via-[#2d1b69] to-[#16213e] p-8 shadow-2xl ring-2 ring-purple-400/20" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-white flex items-center gap-2">
                    <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z"/>
                    </svg>
                    Seu Progresso
                </h2>
                <button onclick="toggleDashboard()" class="text-white/60 hover:text-white transition-colors text-2xl">‚úï</button>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div class="rounded-xl bg-gradient-to-r from-purple-600/30 to-blue-600/30 p-5 ring-1 ring-purple-400/30 shadow-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"/>
                            </svg>
                            <span class="font-bold">N√≠vel <span id="dashboard-level">1</span></span>
                        </div>
                        <div class="text-3xl font-black text-white"><span id="dashboard-xp">0</span> XP</div>
                        <div class="text-sm text-white/60">
                            <span id="dashboard-remaining-xp">50</span> XP para o pr√≥ximo n√≠vel
                        </div>

                        <div class="mt-4 h-4 rounded-full bg-black/30 overflow-hidden">
                            <div id="dashboard-xp-bar" class="h-full bg-gradient-to-r from-green-400 via-yellow-400 to-orange-500 rounded-full transition-all duration-700 shadow-inner" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="rounded-xl bg-gradient-to-r from-emerald-600/30 to-teal-600/30 p-5 ring-1 ring-emerald-400/30 shadow-lg">
                        <div class="flex items-center gap-2 mb-2">
                            <svg class="w-5 h-5 text-emerald-400" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
                            </svg>
                            <span class="font-bold">Quiz Iniciado</span>
                        </div>
                        <div class="text-3xl font-black text-white">
                            <span id="dashboard-quiz-state">Esperando...</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"/>
                        </svg>
                        Conquistas
                    </h3>
                    <div class="space-y-3 max-h-64 overflow-y-auto" id="achievements-list">
                        <!-- Achievements will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HUD Quiz -->
    <section class="relative mx-auto max-w-6xl px-4 py-12">
        <div class="mb-6 md:mb-8 flex items-center justify-between text-xs">
            <div class="flex items-center gap-3">
                <span class="px-3 py-1 rounded-full bg-white/10 text-[#FCEEE3] text-xs font-bold">XP <span id="hud-xp">0</span></span>
                <span class="px-3 py-1 rounded-full bg-white/10 text-[#FCEEE3] text-xs font-bold hidden md:inline-block">
                    Avatar: <span id="hud-avatar">Sombra, olhos cansados.</span>
                </span>
            </div>
            <div class="flex-1 mx-2 md:mx-4 h-1.5 md:h-2 rounded-full bg-white/10 overflow-hidden">
                <div id="progress-bar" class="h-full rounded-full bg-gradient-to-r from-[#F25C54] to-[#FF3B3B]" style="width: 5%"></div>
            </div>
            <span class="opacity-80 text-[#FCEEE3] text-xs hidden md:inline" id="progress-percent">5%</span>
        </div>

        <!-- Fundo decorativo -->
        <div class="absolute inset-0 -z-10 pointer-events-none">
            <div class="absolute -top-24 -left-24 h-96 w-96 rounded-full bg-red-600/30 blur-[120px]"></div>
            <div class="absolute -bottom-24 -right-24 h-96 w-96 rounded-full bg-purple-900/40 blur-[120px]"></div>
        </div>

        <!-- Quiz Content -->
        <div class="relative mx-auto max-w-3xl w-full rounded-3xl p-6 md:p-8 ring-1 ring-white/10 shadow-[0_20px_60px_rgba(0,0,0,.35)] bg-gradient-to-b from-[#2b1a4e] via-[#3c2569] to-[#4B2E83]">

            <!-- Headline Principal -->
            <h1 class="text-3xl md:text-4xl font-black tracking-tight mb-6 text-[#FF3B3B] leading-tight animate-slide-up" style="animation-delay: 0.2s;">
                Daqui a 1 ano sua vida vai estar <br><span class="text-white">IGUAL ‚Äî travada, sem dinheiro e sem orgulho.</span>
            </h1>

            <!-- Subt√≠tulo -->
            <p class="text-sm md:text-base mb-8 text-[#FCEEE3] leading-relaxed animate-slide-up" style="animation-delay: 0.3s;">
                Descubra agora o que te sabota e receba um plano comprovado.
            </p>

            <!-- Cards de Confronto -->
            <div class="grid gap-3 mb-8">
                <div class="card-animation rounded-2xl p-4 ring-1 ring-white/10 bg-gradient-to-br from-[#5e348f] to-[#3d225e] hover-scale">
                    <p class="text-sm opacity-90 text-[#FCEEE3]">Voc√™ gasta 3h40/dia no celular (= 1.345h/ano). Investe em qu√™?</p>
                </div>

                <div class="card-animation rounded-2xl p-4 ring-1 ring-white/10 bg-gradient-to-br from-[#5e348f] to-[#3d225e] hover-scale">
                    <p class="text-sm opacity-90 text-[#FCEEE3]">Cada hora de enrola√ß√£o = 1 oportunidade morta.</p>
                </div>

                <div class="card-animation rounded-2xl p-4 ring-1 ring-white/10 bg-gradient-to-br from-[#5e348f] to-[#3d225e] hover-scale">
                    <p class="text-sm opacity-90 text-[#FCEEE3]">Voc√™ j√° perdeu anos procrastinando. Vai repetir?</p>
                </div>

                <div class="card-animation rounded-2xl p-4 ring-1 ring-white/10 bg-gradient-to-br from-[#5e348f] to-[#3d225e] hover-scale">
                    <p class="text-sm opacity-90 text-[#FCEEE3]">Esse quiz √© espelho. Vai doer.</p>
                </div>
            </div>

            <!-- Bot√£o CTA Principal -->
            <div class="mt-8">
                <button onclick="handleStartQuiz()" class="btn-primary w-full flex items-center justify-between rounded-2xl p-4 ring-1 ring-white/10 transition shadow-[0_20px_60px_rgba(0,0,0,.35)] bg-gradient-to-br from-[#FF6A00] to-[#FF3B3B] hover:shadow-[0_25px_70px_rgba(255,107,0,.4)] font-bold text-white text-base md:text-lg">
                    <span class="text-left">COME√áAR O DIAGN√ìSTICO</span>
                    <svg class="w-5 h-5 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>

            <!-- Frase Motivacional -->
            <p class="mt-6 text-xs opacity-80 italic text-center text-[#FCEEE3]">
                Quem foge da verdade, casa com a mentira.
            </p>

        </div>

    </section>

    <script>
        const XP_LEVELS = [0, 50, 150, 300, 500, 750, 1050, 1400, 1800, 2250];

        const ACHIEVEMENTS = [
            { id: 'quiz_started', title: 'Quiz Iniciado', description: 'Come√ßou o primeiro diagn√≥stico', xpReward: 5 },
            { id: 'quiz_page_5', title: '25% do Caminho', description: 'Completou 25% do quiz', xpReward: 10 },
            { id: 'quiz_page_10', title: 'Meio Caminho Andado', description: 'Completou 50% do quiz', xpReward: 15 },
            { id: 'quiz_complete', title: 'Diagn√≥stico Completo', description: 'Finalizou todo o quiz', xpReward: 25 }
        ];

        let currentXp = 0;
        let currentLevel = 1;
        let achievements = [];
        let quizStarted = false;

        function initGamification() {
            currentXp = parseInt(localStorage.getItem('destravaai_xp') || '0');
            achievements = JSON.parse(localStorage.getItem('destravaai_achievements') || '[]');
            currentLevel = calculateLevel(currentXp);
            updateUI();
            renderAchievements();
        }

        function calculateLevel(xp) {
            for (let i = XP_LEVELS.length - 1; i >= 0; i--) {
                if (xp >= XP_LEVELS[i]) {
                    return i + 1;
                }
            }
            return 1;
        }

        function getXpForNextLevel() {
            return XP_LEVELS[currentLevel] || XP_LEVELS[XP_LEVELS.length - 1];
        }

        function getXpProgress() {
            const currentLevelXp = XP_LEVELS[currentLevel - 1] || 0;
            const nextLevelXp = getXpForNextLevel();
            const progressXp = currentXp - currentLevelXp;
            const totalXpNeeded = nextLevelXp - currentLevelXp;
            return (progressXp / totalXpNeeded) * 100;
        }

        function updateUI() {
            // N√≠veis
            document.getElementById('level-mobile').textContent = currentLevel;
            document.getElementById('level-desktop').textContent = currentLevel;
            document.getElementById('hud-avatar').textContent = 'Sombra, olhos cansados.';

            // XP
            document.getElementById('current-xp').textContent = currentXp;
            document.getElementById('hud-xp').textContent = currentXp;
            document.getElementById('next-level-xp').textContent = getXpForNextLevel();

            // Progress bar
            const progress = getXpProgress();
            document.getElementById('xp-bar').style.width = progress + '%';
            document.getElementById('progress-bar').style.width = '5%';
            document.getElementById('progress-percent').textContent = '5%';

            // Dashboard
            document.getElementById('dashboard-level').textContent = currentLevel;
            document.getElementById('dashboard-xp').textContent = currentXp;
            document.getElementById('dashboard-remaining-xp').textContent = getXpForNextLevel() - currentXp;
            document.getElementById('dashboard-xp-bar').style.width = progress + '%';
            document.getElementById('dashboard-quiz-state').textContent = quizStarted ? 'Em Andamento' : 'Esperando...';
        }

        function showNotification(type, message) {
            const container = document.getElementById('notification-container');
            const notification = document.createElement('div');
            notification.className = 'notification-enter mb-2';

            let bgClass = 'bg-yellow-500/90 text-yellow-900 ring-yellow-400/50';
            let icon = '‚ö°';

            if (type === 'level') {
                bgClass = 'bg-purple-500/90 text-white ring-purple-400/50';
                icon = '‚≠ê';
            } else if (type === 'achievement') {
                bgClass = 'bg-green-500/90 text-white ring-green-400/50';
                icon = 'üèÜ';
            }

            notification.innerHTML = `
                <div class="rounded-xl p-4 backdrop-blur-lg ring-1 shadow-2xl ${bgClass}">
                    <div class="flex items-center gap-2">
                        <span class="text-xl">${icon}</span>
                        <span class="font-bold">${message}</span>
                    </div>
                </div>
            `;

            container.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-50px)';
                notification.style.transition = 'all 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function gainXp(amount, source) {
            const oldLevel = currentLevel;
            currentXp += amount;
            localStorage.setItem('destravaai_xp', currentXp.toString());

            currentLevel = calculateLevel(currentXp);
            updateUI();

            showNotification('xp', `+${amount} XP ganho!`);

            if (currentLevel > oldLevel) {
                setTimeout(() => {
                    showNotification('level', `N√≠vel ${currentLevel} alcan√ßado!`);
                }, 1500);
            }

            if (source && !achievements.includes(source)) {
                achievements.push(source);
                localStorage.setItem('destravaai_achievements', JSON.stringify(achievements));

                const achievement = ACHIEVEMENTS.find(a => a.id === source);
                if (achievement) {
                    setTimeout(() => {
                        showNotification('achievement', `üèÜ ${achievement.title} desbloqueado!`);
                        renderAchievements();
                    }, 2500);
                }
            }
        }

        function renderAchievements() {
            const container = document.getElementById('achievements-list');
            container.innerHTML = ACHIEVEMENTS.map(achievement => {
                const unlocked = achievements.includes(achievement.id);
                return `
                    <div class="${unlocked ? 'bg-gradient-to-r from-emerald-500/30 to-green-500/30 ring-emerald-400/50 text-white shadow-lg' : 'bg-white/5 ring-white/10 text-white/40'} rounded-lg p-3 ring-1 transition-all">
                        <div class="flex items-center gap-2 mb-1">
                            <span>${unlocked ? '‚úÖ' : 'üîí'}</span>
                            <span class="font-bold text-sm">${achievement.title}</span>
                            ${unlocked ? '<span class="text-sm text-emerald-300">üèÜ</span>' : ''}
                        </div>
                        <div class="text-xs opacity-90">${achievement.description}</div>
                        ${achievement.xpReward > 0 ? `<div class="text-xs mt-1 text-yellow-300 font-medium">+${achievement.xpReward} XP</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function handleStartQuiz() {
            quizStarted = true;
            gainXp(5, 'quiz_started');
            updateUI();
            showNotification('achievement', 'Quiz Iniciado!');

            // Redireciona para pr√≥xima p√°gina do quiz (customize conforme necess√°rio)
            setTimeout(() => {
                alert('Pr√≥xima p√°gina do quiz ser√° carregada aqui.\n\nClique em OK para continuar ou adicione sua URL de pr√≥xima p√°gina.');
            }, 1000);
        }

        function toggleDashboard() {
            const modal = document.getElementById('dashboard-modal');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                updateUI();
            } else {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        function closeDashboard(event) {
            if (event.target.id === 'dashboard-modal') {
                toggleDashboard();
            }
        }

        document.addEventListener('DOMContentLoaded', initGamification);
    </script>

</body>
</html>
